---
title: Равновероятностные лутбоксы
description: Подробное описание эндпоинтов API для работы с равновероятностными лутбоксами
---

# Действия с равновероятностными лутбоксами

## Эндпоинты

### Создание равновероятностного лутбокса

**Endpoint:** `POST /equal/create_lootbox`

Создает новый равновероятностный лутбокс с заданными предметами.

**Параметры запроса:**
- `items` (список словарей): Список предметов для лутбокса. Каждый предмет должен содержать:
  - `data` (объект, опционально): Дополнительные данные предмета.
  - `meta` (объект, опционально):
    - `name` (строка): Название предмета.
- `name` (строка): Название лутбокса.
- `draws_count` (целое число, опционально): Количество возможных розыгрышей.

**Пример запроса:**
```json
{
  "items": [
    {
      "data": {},
      "meta": {
        "name": "Rare Sword"
      }
    },
    {
      "data": {},
      "meta": {
        "name": "Common Shield"
      }
    }
  ],
  "name": "Warrior's Lootbox",
  "draws_count": 5
}
```

**Ответ:**
Возвращает созданный объект `EqualLootbox`.

### Обновление содержимого равновероятностного лутбокса

**Endpoint:** `PATCH /equal/update_lootbox/{lootbox_id}`

Обновляет содержимое существующего равновероятностного лутбокса.

**Параметры пути:**
- `lootbox_id` (строка): Идентификатор лутбокса для обновления.

**Параметры запроса:**
- `items` (список объектов `EqualItem`): Новый список предметов для лутбокса.

**Пример запроса:**
```json
{
  "items": [
    {
      "data": {},
      "meta": {
        "name": "Epic Sword"
      }
    },
    {
      "data": {},
      "meta": {
        "name": "Legendary Shield"
      }
    }
  ]
}
```

**Ответ:**
Возвращает обновленный объект `EqualLootbox`.

### Получение предмета из равновероятностного лутбокса

**Endpoint:** `GET /equal/get_loot/{lootbox_id}`

Случайным образом выбирает и возвращает предмет из указанного равновероятностного лутбокса.

**Параметры пути:**
- `lootbox_id` (строка): Идентификатор лутбокса, из которого нужно получить предмет.

**Ответ:**
Возвращает выбранный объект `EqualItem`.

**Пример ответа:**
```json
{
  "id": "bvpuygvyao",
  "data": {
    "value": ""
  },
  "meta": {
    "name": "Иридиевый меч"
  }
}
```

## Модели данных

### EqualLootbox
- `id` (строка): Уникальный идентификатор лутбокса.
- `meta` (объект `Meta`): Метаданные лутбокса.
- `items` (список объектов `EqualItem`): Список предметов в лутбоксе.
- `draws_count` (целое число, опционально): Количество возможных розыгрышей.
- `is_active` (логическое значение): Активен ли лутбокс.

### EqualItem
- `id` (строка): Уникальный идентификатор предмета.
- `data` (объект): Дополнительные данные предмета.
- `meta` (объект `Meta`): Метаданные предмета.

### Meta
- `name` (строка): Название предмета или лутбокса.

## Обработка ошибок

API может возвращать следующие ошибки:

- `400 Bad Request`:
  - `1001`: Лутбокс не найден.
  - `1003`: В лутбоксе нет предметов.
  - `1004`: Лутбокс не активен.
  - `1005`: Неверный тип лутбокса.

При возникновении ошибки API возвращает соответствующий статус-код и детальное описание проблемы.