---
title: Эксклюзивные лутбоксы
description: Подробное описание эндпоинтов API для работы с эксклюзивными лутбоксами
---

# Действия с эксклюзивными лутбоксами

## Эндпоинты

### Создание эксклюзивного лутбокса

**Endpoint:** `POST /exclusive/create_lootbox`

Создает новый эксклюзивный лутбокс с заданными предметами и их весами.

**Параметры запроса:**
- `items` (список словарей): Список предметов для лутбокса. Каждый предмет должен содержать:
  - `data` (объект, опционально): Дополнительные данные предмета.
  - `meta` (объект, опционально):
    - `name` (строка): Название предмета.
  - `weight` (число): Вес предмета (вероятность выпадения).
- `name` (строка): Название лутбокса.
- `draws_count` (целое число, опционально): Количество возможных розыгрышей.

**Пример запроса:**
```json
{
  "items": [
    {
      "data": {},
      "meta": {
        "name": "Unique Sword"
      },
      "weight": 0.3
    },
    {
      "data": {},
      "meta": {
        "name": "Exclusive Shield"
      },
      "weight": 0.7
    }
  ],
  "name": "Collector's Exclusive Lootbox",
  "draws_count": 2
}
```

**Ответ:**
Возвращает созданный объект `ExclusiveLootbox`.

### Обновление содержимого эксклюзивного лутбокса

**Endpoint:** `PATCH /exclusive/update_lootbox/{lootbox_id}`

Обновляет содержимое существующего эксклюзивного лутбокса.

**Параметры пути:**
- `lootbox_id` (строка): Идентификатор лутбокса для обновления.

**Параметры запроса:**
- `items` (список объектов `ExclusiveItem`): Новый список предметов для лутбокса.

**Пример запроса:**
```json
{
  "items": [
    {
      "data": {},
      "meta": {
        "name": "Legendary Sword"
      },
      "weight": 0.2
    },
    {
      "data": {},
      "meta": {
        "name": "Mythical Shield"
      },
      "weight": 0.8
    }
  ]
}
```

**Ответ:**
Возвращает обновленный объект `ExclusiveLootbox`.

### Получение предмета из эксклюзивного лутбокса

**Endpoint:** `GET /exclusive/get_loot/{lootbox_id}`

Выбирает и возвращает предмет из указанного эксклюзивного лутбокса с учетом весов предметов. После выбора предмет удаляется из лутбокса.

**Параметры пути:**
- `lootbox_id` (строка): Идентификатор лутбокса, из которого нужно получить предмет.

**Ответ:**
Возвращает выбранный объект `ExclusiveItem`.

**Пример ответа:**
```json
{
  "id": "gpgfr7u7kx",
  "data": {
    "value": ""
  },
  "meta": {
    "name": "Шелковый шар"
  },
  "weight": 100
}
```

## Модели данных

### ExclusiveLootbox
- `id` (строка): Уникальный идентификатор лутбокса.
- `meta` (объект `Meta`): Метаданные лутбокса.
- `items` (список объектов `ExclusiveItem`): Список предметов в лутбоксе.
- `draws_count` (целое число, опционально): Количество возможных розыгрышей.
- `is_active` (логическое значение): Активен ли лутбокс.

### ExclusiveItem
- `id` (строка): Уникальный идентификатор предмета.
- `data` (объект): Дополнительные данные предмета.
- `meta` (объект `Meta`): Метаданные предмета.
- `weight` (число): Вес предмета (вероятность выпадения).

### Meta
- `name` (строка): Название предмета или лутбокса.

## Обработка ошибок

API может возвращать следующие ошибки:

- `400 Bad Request`:
  - `1001`: Лутбокс не найден.
  - `1003`: В лутбоксе нет предметов.
  - `1004`: Лутбокс не активен.
  - `1005`: Неверный тип лутбокса.

При возникновении ошибки API возвращает соответствующий статус-код и детальное описание проблемы.